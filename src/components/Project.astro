---
import { getCollection } from "astro:content";
import ProjectCard from "@/components/ProjectCard.astro";
import { Badge } from "@/components/starwind/badge";

const allProjects = await getCollection("projects");

// Sort numerically by frontmatter `id`
const projects = allProjects.sort((a, b) => a.data.id - b.data.id);
---

<div class="relative z-10 py-8 bg-transparent">

  <!-- Page Title -->
  <h1 class="font-bold text-6xl mb-12 heading">Portfolio</h1>
  <p class="text-lg text-gray-600 mb-16 max-w-2xl">
    A selection of various projects.
  </p>

  <!-- Masonry-style columns grid -->
  <div class="columns-1 sm:columns-2 md:columns-5 gap-4">
    {projects.map((article) => (
      <div class="break-inside-avoid mb-4">
        <ProjectCard
          project={article}
          buttonText="View"
          class="rounded-none shadow-none border-none"
        >
          <!-- Tech Tags Slot -->
          <div class="flex flex-wrap gap-1 mt-2">
            {article.data.tech.map((item) => (
              <Badge size="sm" variant="ghost">{item}</Badge>
            ))}
          </div>
        </ProjectCard>
      </div>
    ))}
  </div>
</div>
