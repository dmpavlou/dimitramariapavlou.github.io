---
import { getCollection } from "astro:content";
const allProjects = await getCollection("projects");
import { Badge } from "@/components/starwind/badge";
import ProjectCard from "@/components/ProjectCard.astro";
import Layout from "@/layouts/Layout.astro";
---

 <Layout>
  <!-- Background Wrapper -->
  <div class="fixed inset-0 -z-10 overflow-hidden">
    <!-- Blurred Abstract Background -->
    <div
      class="absolute inset-0 bg-cover bg-center filter blur-[70px] scale-75 brightness-400 contrast-300 opacity-40"
      style="background-image: url('/images/background.jpg');"
      aria-hidden="true"
    ></div>

    <!-- Very subtle translucent veil for text readability -->
    <div class="absolute inset-0 bg-white/40 backdrop-blur-[2px]"></div>
  </div>

  <!-- Main Content -->
  <div class="relative z-10 py-8 bg-transparent">
    <!-- Force override any white background that Layout adds -->
    <style>
      main, body, .layout-wrapper, .page-container {
        background: transparent !important;
      }
    </style>

    <!-- Title -->
    <h1 class="font-bold text-6xl mb-12">Portfolio</h1>
    <p class="text-lg text-gray-600 mb-16 max-w-2xl">
      A selection of various projects.
    </p>

    <!-- Grid with no gaps -->
    <div class="columns-1 sm:columns-2 md:columns-3 gap-0">
      {allProjects.map((article: any) => (
        <ProjectCard
          project={article}
          buttonText="View"
          class="rounded-none shadow-none border-none"
        >
          <!-- Tech Tags Slot -->
          <div class="flex flex-wrap gap-1 mt-2">
            {article.data.tech.map((item: any) => (
              <Badge size="sm" variant="ghost">{item}</Badge>
            ))}
          </div>
        </ProjectCard>
      ))}
    </div>
  </div>
</Layout>
