---
import { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from "@/components/starwind/card";
import { Button } from "@/components/starwind/button";

const {project, desc} = Astro.props;
---

<Card class="w-full relative overflow-hidden rounded-none shadow-none" slot="preview">

  <!-- Blurred Full-Card Background -->
  <div
    class="absolute inset-0 bg-cover bg-center filter blur-3xl scale-120"
    style={{ backgroundImage: `url(${project.data.image})` }}
    aria-hidden="true"
  ></div>

  <!-- Fade edges to white -->
  <div class="absolute inset-0 bg-gradient-to-b from-white via-white/100 to-white/0"></div>

  <!-- Content -->
  <CardContent class="relative z-10 flex flex-col justify-between p-0">
    
    <!-- Foreground Image with rounded mask to fade edges -->
    <div class="relative">
      <img
        src={project.data.image}
        alt={project.data.title}
        class="w-full object-cover mask-image-[linear-gradient(to_bottom,rgba(255,255,255,1)_0%,rgba(255,255,255,0)_10%,rgba(255,255,255,0)_90%,rgba(255,255,255,1)_100%)]"
        loading="lazy"
      />
    </div>

    <!-- Header -->
    <div class="p-4">
      <CardTitle class="font-light text-gray-900 drop-shadow-md">{project.data.title}</CardTitle>
      <CardDescription class="text-gray-800/90 drop-shadow-sm">
        <small>{project.data.published}</small>
        <div></div>
        {project.data.description}
      </CardDescription>

      <!-- Tech Tags -->
      {project.data.tech && (
        <div class="flex flex-wrap gap-2 mt-2">
          {project.data.tech.map(tech => (
            <span class="bg-gray-200/50 text-gray-900 text-xs px-2 py-1 rounded-md drop-shadow-sm">{tech}</span>
          ))}
        </div>
      )}
    </div>

    <!-- Footer -->
    <CardFooter class="flex justify-between p-4">
      <Button href={`/projects/${project.data.slug}`} variant="outline">View</Button>
    </CardFooter>

  </CardContent>

</Card>
